Resources:
  AWSEBAutoScalingGroup:
    Type: "AWS::AutoScaling::AutoScalingGroup"
    Properties:
      HealthCheckType: ELB
      HealthCheckGracePeriod: 300
      
option_settings:
  # AutoScaling Options
  aws:autoscaling:asg:
    MinSize: 1
    MaxSize: 4
    
  # Scaling Triggers
  aws:autoscaling:trigger:
    MeasureName: CPUUtilization
    Statistic: Average
    Unit: Percent
    Period: 5
    BreachDuration: 5
    UpperThreshold: 80
    UpperBreachScaleIncrement: 1
    LowerThreshold: 40
    LowerBreachScaleIncrement: -1
    
  # Application healthcheck
  aws:elasticbeanstalk:application:
    Application Healthcheck URL: /health
    
  # Enhanced healthcheck metrics
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced
    
  # Load Balancer Configuration
  aws:elasticbeanstalk:environment:
    LoadBalancerType: application
    
  # Load Balancer Listener Configuration
  aws:elbv2:listener:default:
    ListenerEnabled: true
    Protocol: HTTP
    
  # SSL Listener (uncomment and configure when SSL certificate is available)
  # aws:elbv2:listener:443:
  #   ListenerEnabled: true
  #   Protocol: HTTPS
  #   SSLCertificateArns: arn:aws:acm:region:account:certificate/certificate-id